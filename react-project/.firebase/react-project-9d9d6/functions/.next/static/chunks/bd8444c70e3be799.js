(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65857,e=>{"use strict";var a=e.i(43476),s=e.i(71645);e.i(51718);var l=e.i(18357),i=e.i(71935),t=e.i(151);e.i(36180);var d=e.i(98925);function r(){let{user:e}=(0,i.useAuth)(),[r,c]=(0,s.useState)(""),[n,o]=(0,s.useState)(""),[m,p]=(0,s.useState)(!0),[u,x]=(0,s.useState)({street:"",city:"",zipCode:""});(0,s.useEffect)(()=>{(async()=>{if(!e?.uid)return p(!1);p(!0),c("");try{let a=await (0,d.getDoc)((0,d.doc)(t.db,"users",e.uid)),s=a.exists()?a.data()?.address:null;s?x({street:s.street||"",city:s.city||"",zipCode:s.zipCode||""}):x({street:"",city:"",zipCode:""})}catch(e){c(e?.message||"Nie udało się pobrać danych adresowych.")}finally{p(!1)}})()},[e?.uid]);let h=async a=>{a.preventDefault(),c(""),o("");let s=a.target.displayName.value,i=a.target.photoURL.value;try{await (0,l.updateProfile)(e,{displayName:s,photoURL:i}),await (0,d.setDoc)((0,d.doc)(t.db,"users",e.uid),{address:{street:u.street,city:u.city,zipCode:u.zipCode}},{merge:!0}),o("Profile updated")}catch(e){c(e?.message||"Nie udało się zaktualizować profilu.")}};return(0,a.jsxs)("div",{className:"max-w-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Profile"}),e?.email&&(0,a.jsx)("div",{className:"badge badge-neutral",children:e.email})]}),r&&(0,a.jsx)("div",{className:"alert alert-error mb-4",children:(0,a.jsx)("span",{children:r})}),n&&(0,a.jsx)("div",{className:"alert alert-success mb-4",children:(0,a.jsx)("span",{children:n})}),(0,a.jsx)("div",{className:"card bg-base-100 shadow border border-base-300",children:(0,a.jsxs)("div",{className:"card-body p-6 gap-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"avatar",children:(0,a.jsx)("div",{className:"w-16 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2",children:(0,a.jsx)("img",{src:e?.photoURL||"https://placehold.co/128x128?text=USER",alt:"Profile"})})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"font-semibold text-lg truncate",children:e?.displayName||"No display name"}),(0,a.jsx)("div",{className:"text-sm opacity-70 truncate",children:e?.uid})]})]}),(0,a.jsxs)("form",{onSubmit:h,className:"grid gap-3",children:[(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Display name"})}),(0,a.jsx)("input",{name:"displayName",defaultValue:e?.displayName||"",className:"input input-bordered w-full",placeholder:"displayName"})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Email"})}),(0,a.jsx)("input",{name:"email",value:e?.email||"",readOnly:!0,className:"input input-bordered w-full opacity-70"})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Photo URL"})}),(0,a.jsx)("input",{name:"photoURL",defaultValue:e?.photoURL||"",className:"input input-bordered w-full",placeholder:"photoURL"})]}),(0,a.jsx)("div",{className:"divider my-1",children:"Address"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Street"})}),(0,a.jsx)("input",{name:"street",value:u.street,onChange:e=>x({...u,street:e.target.value}),disabled:m,className:"input input-bordered w-full",placeholder:"street"})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"City"})}),(0,a.jsx)("input",{name:"city",value:u.city,onChange:e=>x({...u,city:e.target.value}),disabled:m,className:"input input-bordered w-full",placeholder:"city"})]}),(0,a.jsxs)("div",{className:"form-control",children:[(0,a.jsx)("label",{className:"label",children:(0,a.jsx)("span",{className:"label-text",children:"Zip code"})}),(0,a.jsx)("input",{name:"zipCode",value:u.zipCode,onChange:e=>x({...u,zipCode:e.target.value}),disabled:m,className:"input input-bordered w-full",placeholder:"zipCode"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[m?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm opacity-70",children:[(0,a.jsx)("span",{className:"loading loading-spinner loading-sm"}),"Loading address..."]}):(0,a.jsx)("div",{className:"text-sm opacity-60",children:"Ready"}),(0,a.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:m,children:m?"Loading...":"Zapisz"})]})]})]})})]})}e.s(["default",()=>r])}]);