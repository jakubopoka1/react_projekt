(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31699,e=>{"use strict";var a=e.i(43476),s=e.i(71645),i=e.i(71935),d=e.i(151);e.i(36180);var t=e.i(98925);function l(){let{user:e}=(0,i.useAuth)(),[l,r]=(0,s.useState)([]),[c,n]=(0,s.useState)(!0),[o,m]=(0,s.useState)(""),[u,b]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),j=async()=>{if(e?.uid){n(!0),b("");try{let a=(0,t.query)((0,t.collection)(d.db,"articles"),(0,t.where)("user","==",e.uid)),s=await (0,t.getDocs)(a);r(s.docs.map(e=>({id:e.id,...e.data()})))}catch(e){b(e?.message||"Nie udało się pobrać artykułów.")}finally{n(!1)}}};(0,s.useEffect)(()=>{j()},[e?.uid]);let p=async a=>{if(a.preventDefault(),b(""),x(""),!o.trim())return void b("Podaj tytuł.");try{await (0,t.addDoc)((0,t.collection)(d.db,"articles"),{title:o.trim(),user:e.uid,createdAt:(0,t.serverTimestamp)()}),m(""),x("Dodano artykuł."),await j()}catch(e){b(e?.message||"Nie udało się dodać artykułu.")}};return c?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("span",{className:"loading loading-spinner loading-md"})}):(0,a.jsxs)("div",{className:"max-w-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"My articles"}),(0,a.jsx)("div",{className:"badge badge-neutral",children:l.length})]}),u&&(0,a.jsx)("div",{className:"alert alert-error mb-4",children:(0,a.jsx)("span",{children:u})}),h&&(0,a.jsx)("div",{className:"alert alert-success mb-4",children:(0,a.jsx)("span",{children:h})}),(0,a.jsx)("div",{className:"card bg-base-100 shadow border border-base-300 mb-6",children:(0,a.jsxs)("div",{className:"card-body p-4",children:[(0,a.jsx)("h2",{className:"card-title text-base",children:"Add article"}),(0,a.jsxs)("form",{onSubmit:p,className:"flex flex-col gap-3 sm:flex-row",children:[(0,a.jsx)("input",{className:"input input-bordered w-full",placeholder:"Title",value:o,onChange:e=>m(e.target.value)}),(0,a.jsx)("button",{className:"btn btn-primary sm:w-32",type:"submit",children:"Add"})]})]})}),0===l.length?(0,a.jsx)("div",{className:"card bg-base-100 shadow border border-base-300",children:(0,a.jsx)("div",{className:"card-body p-4",children:(0,a.jsx)("div",{className:"text-sm opacity-70",children:"Brak rekordów."})})}):(0,a.jsx)("div",{className:"grid gap-3",children:l.map(e=>(0,a.jsx)("div",{className:"card bg-base-100 shadow border border-base-300",children:(0,a.jsx)("div",{className:"card-body p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"font-semibold truncate",children:e.title??e.id}),(0,a.jsxs)("div",{className:"text-xs opacity-60",children:["ID: ",e.id]})]}),(0,a.jsx)("div",{className:"badge badge-outline",children:"article"})]})})},e.id))})]})}e.s(["default",()=>l])}]);