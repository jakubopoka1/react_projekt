{"version":3,"sources":["../../../../app/%28public%29/user/signin/SignInClient.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport {\n\tsignInWithEmailAndPassword,\n\tsetPersistence,\n\tbrowserSessionPersistence,\n\tsignOut,\n} from \"firebase/auth\";\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport { auth } from \"@/app/lib/firebase\";\n\nexport default function SignInClient() {\n\tconst params = useSearchParams();\n\tconst router = useRouter();\n\tconst returnUrl = params.get(\"returnUrl\");\n\tconst [error, setError] = useState(\"\");\n\tconst [loading, setLoading] = useState(false);\n\n\tconst onSubmit = (e) => {\n\t\te.preventDefault();\n\t\tsetError(\"\");\n\n\t\tconst email = e.target.email.value;\n\t\tconst password = e.target.password.value;\n\n\t\tsetLoading(true);\n\n\t\tsetPersistence(auth, browserSessionPersistence)\n\t\t\t.then(() => signInWithEmailAndPassword(auth, email, password))\n\t\t\t.then((cred) => {\n\t\t\t\tconst u = cred.user;\n\n\t\t\t\tif (!u.emailVerified) {\n\t\t\t\t\tlocalStorage.setItem(\"pendingVerificationEmail\", u.email || \"\");\n\t\t\t\t\treturn signOut(auth).finally(() => router.push(\"/user/verify\"));\n\t\t\t\t}\n\n\t\t\t\trouter.push(returnUrl || \"/\");\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tsetError(err?.message || \"Nie udało się zalogować.\");\n\t\t\t})\n\t\t\t.finally(() => setLoading(false));\n\t};\n\n\treturn (\n\t\t<div className='max-w-md mx-auto'>\n\t\t\t<div className='card bg-base-100 shadow border border-base-300'>\n\t\t\t\t<div className='card-body p-6'>\n\t\t\t\t\t<h1 className='card-title text-lg'>Sign in</h1>\n\t\t\t\t\t<p className='text-sm opacity-70'>\n\t\t\t\t\t\tZaloguj się, aby uzyskać dostęp do chronionych stron.\n\t\t\t\t\t</p>\n\n\t\t\t\t\t{error && (\n\t\t\t\t\t\t<div className='alert alert-error mt-3'>\n\t\t\t\t\t\t\t<span>{error}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<form onSubmit={onSubmit} className='mt-4 flex flex-col gap-3'>\n\t\t\t\t\t\t<div className='form-control'>\n\t\t\t\t\t\t\t<label className='label'>\n\t\t\t\t\t\t\t\t<span className='label-text'>Email</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\t\t\tplaceholder='Email'\n\t\t\t\t\t\t\t\tclassName='input input-bordered w-full'\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='form-control'>\n\t\t\t\t\t\t\t<label className='label'>\n\t\t\t\t\t\t\t\t<span className='label-text'>Password</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\t\tplaceholder='Password'\n\t\t\t\t\t\t\t\tclassName='input input-bordered w-full'\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='btn btn-primary mt-2'\n\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\tdisabled={loading}>\n\t\t\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<span className='loading loading-spinner loading-sm'></span>\n\t\t\t\t\t\t\t\t\tLogging in...\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\"Login\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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"}