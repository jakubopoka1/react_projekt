{"version":3,"sources":["../../../../app/%28public%29/user/register/page.js"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport {\n\tcreateUserWithEmailAndPassword,\n\tsendEmailVerification,\n\tsignOut,\n} from \"firebase/auth\";\nimport { auth } from \"@/app/lib/firebase\";\nimport { useAuth } from \"@/app/lib/AuthContext\";\nimport { useRouter } from \"next/navigation\";\n\nexport default function RegisterPage() {\n\tconst { user } = useAuth();\n\tconst router = useRouter();\n\tconst [registerError, setRegisterError] = useState(\"\");\n\tconst [loading, setLoading] = useState(false);\n\n\tif (user) return null;\n\n\tconst onSubmit = async (e) => {\n\t\te.preventDefault();\n\t\tsetRegisterError(\"\");\n\n\t\tconst email = e.target.email.value.trim();\n\t\tconst password = e.target.password.value;\n\t\tconst password2 = e.target.password2.value;\n\n\t\tif (password !== password2) {\n\t\t\tsetRegisterError(\"Hasła muszą być identyczne.\");\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tsetLoading(true);\n\n\t\t\tawait createUserWithEmailAndPassword(auth, email, password);\n\t\t\tawait sendEmailVerification(auth.currentUser);\n\n\t\t\tlocalStorage.setItem(\"pendingVerificationEmail\", email);\n\n\t\t\tawait signOut(auth);\n\n\t\t\trouter.push(\"/user/verify\");\n\t\t} catch (err) {\n\t\t\tsetRegisterError(err?.message || \"Błąd rejestracji.\");\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className='max-w-md mx-auto'>\n\t\t\t<div className='card bg-base-100 shadow border border-base-300'>\n\t\t\t\t<div className='card-body p-6'>\n\t\t\t\t\t<h1 className='card-title text-lg'>Register</h1>\n\t\t\t\t\t<p className='text-sm opacity-70'>\n\t\t\t\t\t\tUtwórz konto, a następnie potwierdź e-mail.\n\t\t\t\t\t</p>\n\n\t\t\t\t\t{registerError && (\n\t\t\t\t\t\t<div className='alert alert-error mt-3'>\n\t\t\t\t\t\t\t<span>{registerError}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<form onSubmit={onSubmit} className='mt-4 flex flex-col gap-3'>\n\t\t\t\t\t\t<div className='form-control'>\n\t\t\t\t\t\t\t<label className='label'>\n\t\t\t\t\t\t\t\t<span className='label-text'>Email</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\t\t\tplaceholder='Email'\n\t\t\t\t\t\t\t\tclassName='input input-bordered w-full'\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='form-control'>\n\t\t\t\t\t\t\t<label className='label'>\n\t\t\t\t\t\t\t\t<span className='label-text'>Hasło</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\t\tplaceholder='Hasło'\n\t\t\t\t\t\t\t\tclassName='input input-bordered w-full'\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='form-control'>\n\t\t\t\t\t\t\t<label className='label'>\n\t\t\t\t\t\t\t\t<span className='label-text'>Powtórz hasło</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname='password2'\n\t\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\t\tplaceholder='Powtórz hasło'\n\t\t\t\t\t\t\t\tclassName='input input-bordered w-full'\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='btn btn-primary mt-2'\n\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\tdisabled={loading}>\n\t\t\t\t\t\t\t{loading ? \"Tworzenie...\" : \"Utwórz konto\"}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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"}