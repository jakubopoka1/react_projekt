module.exports=[93096,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(30485);var d=a.i(31052),e=a.i(58058),f=a.i(29264);a.i(69387);var g=a.i(60574);function h(){let{user:a}=(0,e.useAuth)(),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)({street:"",city:"",zipCode:""});(0,c.useEffect)(()=>{(async()=>{if(!a?.uid)return m(!1);m(!0),i("");try{let b=await (0,g.getDoc)((0,g.doc)(f.db,"users",a.uid)),c=b.exists()?b.data()?.address:null;c?o({street:c.street||"",city:c.city||"",zipCode:c.zipCode||""}):o({street:"",city:"",zipCode:""})}catch(a){i(a?.message||"Nie udało się pobrać danych adresowych.")}finally{m(!1)}})()},[a?.uid]);let p=async b=>{b.preventDefault(),i(""),k("");let c=b.target.displayName.value,e=b.target.photoURL.value;try{await (0,d.updateProfile)(a,{displayName:c,photoURL:e}),await (0,g.setDoc)((0,g.doc)(f.db,"users",a.uid),{address:{street:n.street,city:n.city,zipCode:n.zipCode}},{merge:!0}),k("Profile updated")}catch(a){i(a?.message||"Nie udało się zaktualizować profilu.")}};return(0,b.jsxs)("div",{className:"max-w-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Profile"}),a?.email&&(0,b.jsx)("div",{className:"badge badge-neutral",children:a.email})]}),h&&(0,b.jsx)("div",{className:"alert alert-error mb-4",children:(0,b.jsx)("span",{children:h})}),j&&(0,b.jsx)("div",{className:"alert alert-success mb-4",children:(0,b.jsx)("span",{children:j})}),(0,b.jsx)("div",{className:"card bg-base-100 shadow border border-base-300",children:(0,b.jsxs)("div",{className:"card-body p-6 gap-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"avatar",children:(0,b.jsx)("div",{className:"w-16 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2",children:(0,b.jsx)("img",{src:a?.photoURL||"https://placehold.co/128x128?text=USER",alt:"Profile"})})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"font-semibold text-lg truncate",children:a?.displayName||"No display name"}),(0,b.jsx)("div",{className:"text-sm opacity-70 truncate",children:a?.uid})]})]}),(0,b.jsxs)("form",{onSubmit:p,className:"grid gap-3",children:[(0,b.jsxs)("div",{className:"form-control",children:[(0,b.jsx)("label",{className:"label",children:(0,b.jsx)("span",{className:"label-text",children:"Display name"})}),(0,b.jsx)("input",{name:"displayName",defaultValue:a?.displayName||"",className:"input input-bordered w-full",placeholder:"displayName"})]}),(0,b.jsxs)("div",{className:"form-control",children:[(0,b.jsx)("label",{className:"label",children:(0,b.jsx)("span",{className:"label-text",children:"Email"})}),(0,b.jsx)("input",{name:"email",value:a?.email||"",readOnly:!0,className:"input input-bordered w-full opacity-70"})]}),(0,b.jsxs)("div",{className:"form-control",children:[(0,b.jsx)("label",{className:"label",children:(0,b.jsx)("span",{className:"label-text",children:"Photo URL"})}),(0,b.jsx)("input",{name:"photoURL",defaultValue:a?.photoURL||"",className:"input input-bordered w-full",placeholder:"photoURL"})]}),(0,b.jsx)("div",{className:"divider my-1",children:"Address"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,b.jsxs)("div",{className:"form-control",children:[(0,b.jsx)("label",{className:"label",children:(0,b.jsx)("span",{className:"label-text",children:"Street"})}),(0,b.jsx)("input",{name:"street",value:n.street,onChange:a=>o({...n,street:a.target.value}),disabled:l,className:"input input-bordered w-full",placeholder:"street"})]}),(0,b.jsxs)("div",{className:"form-control",children:[(0,b.jsx)("label",{className:"label",children:(0,b.jsx)("span",{className:"label-text",children:"City"})}),(0,b.jsx)("input",{name:"city",value:n.city,onChange:a=>o({...n,city:a.target.value}),disabled:l,className:"input input-bordered w-full",placeholder:"city"})]}),(0,b.jsxs)("div",{className:"form-control",children:[(0,b.jsx)("label",{className:"label",children:(0,b.jsx)("span",{className:"label-text",children:"Zip code"})}),(0,b.jsx)("input",{name:"zipCode",value:n.zipCode,onChange:a=>o({...n,zipCode:a.target.value}),disabled:l,className:"input input-bordered w-full",placeholder:"zipCode"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[l?(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm opacity-70",children:[(0,b.jsx)("span",{className:"loading loading-spinner loading-sm"}),"Loading address..."]}):(0,b.jsx)("div",{className:"text-sm opacity-60",children:"Ready"}),(0,b.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:l,children:l?"Loading...":"Zapisz"})]})]})]})})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=app_%28protected%29_user_profile_page_cce1eff2.js.map