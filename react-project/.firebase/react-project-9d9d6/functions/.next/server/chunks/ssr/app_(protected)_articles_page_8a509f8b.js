module.exports=[47141,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(58058),e=a.i(29264);a.i(69387);var f=a.i(60574);function g(){let{user:a}=(0,d.useAuth)(),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),q=async()=>{if(a?.uid){j(!0),n("");try{let b=(0,f.query)((0,f.collection)(e.db,"articles"),(0,f.where)("user","==",a.uid)),c=await (0,f.getDocs)(b);h(c.docs.map(a=>({id:a.id,...a.data()})))}catch(a){n(a?.message||"Nie udało się pobrać artykułów.")}finally{j(!1)}}};(0,c.useEffect)(()=>{q()},[a?.uid]);let r=async b=>{if(b.preventDefault(),n(""),p(""),!k.trim())return void n("Podaj tytuł.");try{await (0,f.addDoc)((0,f.collection)(e.db,"articles"),{title:k.trim(),user:a.uid,createdAt:(0,f.serverTimestamp)()}),l(""),p("Dodano artykuł."),await q()}catch(a){n(a?.message||"Nie udało się dodać artykułu.")}};return i?(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)("span",{className:"loading loading-spinner loading-md"})}):(0,b.jsxs)("div",{className:"max-w-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"My articles"}),(0,b.jsx)("div",{className:"badge badge-neutral",children:g.length})]}),m&&(0,b.jsx)("div",{className:"alert alert-error mb-4",children:(0,b.jsx)("span",{children:m})}),o&&(0,b.jsx)("div",{className:"alert alert-success mb-4",children:(0,b.jsx)("span",{children:o})}),(0,b.jsx)("div",{className:"card bg-base-100 shadow border border-base-300 mb-6",children:(0,b.jsxs)("div",{className:"card-body p-4",children:[(0,b.jsx)("h2",{className:"card-title text-base",children:"Add article"}),(0,b.jsxs)("form",{onSubmit:r,className:"flex flex-col gap-3 sm:flex-row",children:[(0,b.jsx)("input",{className:"input input-bordered w-full",placeholder:"Title",value:k,onChange:a=>l(a.target.value)}),(0,b.jsx)("button",{className:"btn btn-primary sm:w-32",type:"submit",children:"Add"})]})]})}),0===g.length?(0,b.jsx)("div",{className:"card bg-base-100 shadow border border-base-300",children:(0,b.jsx)("div",{className:"card-body p-4",children:(0,b.jsx)("div",{className:"text-sm opacity-70",children:"Brak rekordów."})})}):(0,b.jsx)("div",{className:"grid gap-3",children:g.map(a=>(0,b.jsx)("div",{className:"card bg-base-100 shadow border border-base-300",children:(0,b.jsx)("div",{className:"card-body p-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"font-semibold truncate",children:a.title??a.id}),(0,b.jsxs)("div",{className:"text-xs opacity-60",children:["ID: ",a.id]})]}),(0,b.jsx)("div",{className:"badge badge-outline",children:"article"})]})})},a.id))})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=app_%28protected%29_articles_page_8a509f8b.js.map