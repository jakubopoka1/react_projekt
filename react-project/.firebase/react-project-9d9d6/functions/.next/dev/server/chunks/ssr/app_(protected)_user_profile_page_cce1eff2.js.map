{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jakubopoka/Desktop/WSEI/REACT_PROJEKT/react-project/app/%28protected%29/user/profile/page.js"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { updateProfile } from \"firebase/auth\";\nimport { useAuth } from \"@/app/lib/AuthContext\";\nimport { db } from \"@/app/lib/firebase\";\nimport { setDoc, doc, getDoc } from \"firebase/firestore\";\n\nexport default function ProfilePage() {\n\tconst { user } = useAuth();\n\n\tconst [error, setError] = useState(\"\");\n\tconst [msg, setMsg] = useState(\"\");\n\n\tconst [addrLoading, setAddrLoading] = useState(true);\n\tconst [address, setAddress] = useState({\n\t\tstreet: \"\",\n\t\tcity: \"\",\n\t\tzipCode: \"\",\n\t});\n\n\tuseEffect(() => {\n\t\tconst loadAddress = async () => {\n\t\t\tif (!user?.uid) {\n\t\t\t\tsetAddrLoading(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetAddrLoading(true);\n\t\t\tsetError(\"\");\n\n\t\t\ttry {\n\t\t\t\tconst snap = await getDoc(doc(db, \"users\", user.uid));\n\t\t\t\tconst a = snap.exists() ? snap.data()?.address : null;\n\n\t\t\t\tif (a) {\n\t\t\t\t\tsetAddress({\n\t\t\t\t\t\tstreet: a.street || \"\",\n\t\t\t\t\t\tcity: a.city || \"\",\n\t\t\t\t\t\tzipCode: a.zipCode || \"\",\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsetAddress({ street: \"\", city: \"\", zipCode: \"\" });\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsetError(e?.message || \"Nie udało się pobrać danych adresowych.\");\n\t\t\t} finally {\n\t\t\t\tsetAddrLoading(false);\n\t\t\t}\n\t\t};\n\n\t\tloadAddress();\n\t}, [user?.uid]);\n\n\tconst onSubmit = async (e) => {\n\t\te.preventDefault();\n\t\tsetError(\"\");\n\t\tsetMsg(\"\");\n\n\t\tconst displayName = e.target.displayName.value;\n\t\tconst photoURL = e.target.photoURL.value;\n\n\t\ttry {\n\t\t\tawait updateProfile(user, { displayName, photoURL });\n\n\t\t\tawait setDoc(\n\t\t\t\tdoc(db, \"users\", user.uid),\n\t\t\t\t{\n\t\t\t\t\taddress: {\n\t\t\t\t\t\tstreet: address.street,\n\t\t\t\t\t\tcity: address.city,\n\t\t\t\t\t\tzipCode: address.zipCode,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{ merge: true }\n\t\t\t);\n\n\t\t\tsetMsg(\"Profile updated\");\n\t\t} catch (err) {\n\t\t\tsetError(err?.message || \"Nie udało się zaktualizować profilu.\");\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className='max-w-2xl'>\n\t\t\t<div className='flex items-center justify-between mb-4'>\n\t\t\t\t<h1 className='text-2xl font-bold'>Profile</h1>\n\t\t\t\t{user?.email && <div className='badge badge-neutral'>{user.email}</div>}\n\t\t\t</div>\n\n\t\t\t{error && (\n\t\t\t\t<div className='alert alert-error mb-4'>\n\t\t\t\t\t<span>{error}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{msg && (\n\t\t\t\t<div className='alert alert-success mb-4'>\n\t\t\t\t\t<span>{msg}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className='card bg-base-100 shadow border border-base-300'>\n\t\t\t\t<div className='card-body p-6 gap-5'>\n\t\t\t\t\t<div className='flex items-center gap-4'>\n\t\t\t\t\t\t<div className='avatar'>\n\t\t\t\t\t\t\t<div className='w-16 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2'>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\t\t\tuser?.photoURL || \"https://placehold.co/128x128?text=USER\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\talt='Profile'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='min-w-0'>\n\t\t\t\t\t\t\t<div className='font-semibold text-lg truncate'>\n\t\t\t\t\t\t\t\t{user?.displayName || \"No display name\"}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='text-sm opacity-70 truncate'>{user?.uid}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<form onSubmit={onSubmit} className='grid gap-3'>\n\t\t\t\t\t\t<div className='form-control'>\n\t\t\t\t\t\t\t<label className='label'>\n\t\t\t\t\t\t\t\t<span className='label-text'>Display name</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname='displayName'\n\t\t\t\t\t\t\t\tdefaultValue={user?.displayName || \"\"}\n\t\t\t\t\t\t\t\tclassName='input input-bordered w-full'\n\t\t\t\t\t\t\t\tplaceholder='displayName'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='form-control'>\n\t\t\t\t\t\t\t<label className='label'>\n\t\t\t\t\t\t\t\t<span className='label-text'>Email</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\tvalue={user?.email || \"\"}\n\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\tclassName='input input-bordered w-full opacity-70'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='form-control'>\n\t\t\t\t\t\t\t<label className='label'>\n\t\t\t\t\t\t\t\t<span className='label-text'>Photo URL</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname='photoURL'\n\t\t\t\t\t\t\t\tdefaultValue={user?.photoURL || \"\"}\n\t\t\t\t\t\t\t\tclassName='input input-bordered w-full'\n\t\t\t\t\t\t\t\tplaceholder='photoURL'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='divider my-1'>Address</div>\n\n\t\t\t\t\t\t<div className='grid grid-cols-1 md:grid-cols-3 gap-3'>\n\t\t\t\t\t\t\t<div className='form-control'>\n\t\t\t\t\t\t\t\t<label className='label'>\n\t\t\t\t\t\t\t\t\t<span className='label-text'>Street</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tname='street'\n\t\t\t\t\t\t\t\t\tvalue={address.street}\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\tsetAddress({ ...address, street: e.target.value })\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdisabled={addrLoading}\n\t\t\t\t\t\t\t\t\tclassName='input input-bordered w-full'\n\t\t\t\t\t\t\t\t\tplaceholder='street'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className='form-control'>\n\t\t\t\t\t\t\t\t<label className='label'>\n\t\t\t\t\t\t\t\t\t<span className='label-text'>City</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tname='city'\n\t\t\t\t\t\t\t\t\tvalue={address.city}\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\tsetAddress({ ...address, city: e.target.value })\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdisabled={addrLoading}\n\t\t\t\t\t\t\t\t\tclassName='input input-bordered w-full'\n\t\t\t\t\t\t\t\t\tplaceholder='city'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className='form-control'>\n\t\t\t\t\t\t\t\t<label className='label'>\n\t\t\t\t\t\t\t\t\t<span className='label-text'>Zip code</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tname='zipCode'\n\t\t\t\t\t\t\t\t\tvalue={address.zipCode}\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\tsetAddress({ ...address, zipCode: e.target.value })\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdisabled={addrLoading}\n\t\t\t\t\t\t\t\t\tclassName='input input-bordered w-full'\n\t\t\t\t\t\t\t\t\tplaceholder='zipCode'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='flex items-center justify-between mt-2'>\n\t\t\t\t\t\t\t{addrLoading ? (\n\t\t\t\t\t\t\t\t<div className='flex items-center gap-2 text-sm opacity-70'>\n\t\t\t\t\t\t\t\t\t<span className='loading loading-spinner loading-sm'></span>\n\t\t\t\t\t\t\t\t\tLoading address...\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div className='text-sm opacity-60'>Ready</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName='btn btn-primary'\n\t\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\t\tdisabled={addrLoading}>\n\t\t\t\t\t\t\t\t{addrLoading ? \"Loading...\" : \"Zapisz\"}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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"}}]
}