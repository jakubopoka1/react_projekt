{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jakubopoka/Desktop/WSEI/REACT_PROJEKT/react-project/app/%28protected%29/articles/page.js"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useAuth } from \"@/app/lib/AuthContext\";\nimport { db } from \"@/app/lib/firebase\";\nimport {\n\taddDoc,\n\tcollection,\n\tgetDocs,\n\tquery,\n\twhere,\n\tserverTimestamp,\n} from \"firebase/firestore\";\n\nexport default function ArticlesPage() {\n\tconst { user } = useAuth();\n\n\tconst [items, setItems] = useState([]);\n\tconst [loading, setLoading] = useState(true);\n\n\tconst [title, setTitle] = useState(\"\");\n\tconst [error, setError] = useState(\"\");\n\tconst [msg, setMsg] = useState(\"\");\n\n\tconst load = async () => {\n\t\tif (!user?.uid) return;\n\n\t\tsetLoading(true);\n\t\tsetError(\"\");\n\n\t\ttry {\n\t\t\tconst q = query(\n\t\t\t\tcollection(db, \"articles\"),\n\t\t\t\twhere(\"user\", \"==\", user.uid)\n\t\t\t);\n\t\t\tconst snap = await getDocs(q);\n\t\t\tsetItems(snap.docs.map((d) => ({ id: d.id, ...d.data() })));\n\t\t} catch (e) {\n\t\t\tsetError(e?.message || \"Nie udało się pobrać artykułów.\");\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tload();\n\t}, [user?.uid]);\n\n\tconst onAdd = async (e) => {\n\t\te.preventDefault();\n\t\tsetError(\"\");\n\t\tsetMsg(\"\");\n\n\t\tif (!title.trim()) {\n\t\t\tsetError(\"Podaj tytuł.\");\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait addDoc(collection(db, \"articles\"), {\n\t\t\t\ttitle: title.trim(),\n\t\t\t\tuser: user.uid,\n\t\t\t\tcreatedAt: serverTimestamp(),\n\t\t\t});\n\n\t\t\tsetTitle(\"\");\n\t\t\tsetMsg(\"Dodano artykuł.\");\n\t\t\tawait load();\n\t\t} catch (e) {\n\t\t\tsetError(e?.message || \"Nie udało się dodać artykułu.\");\n\t\t}\n\t};\n\n\tif (loading) {\n\t\treturn (\n\t\t\t<div className='p-6'>\n\t\t\t\t<span className='loading loading-spinner loading-md'></span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className='max-w-2xl'>\n\t\t\t<div className='flex items-center justify-between mb-4'>\n\t\t\t\t<h1 className='text-2xl font-bold'>My articles</h1>\n\t\t\t\t<div className='badge badge-neutral'>{items.length}</div>\n\t\t\t</div>\n\n\t\t\t{error && (\n\t\t\t\t<div className='alert alert-error mb-4'>\n\t\t\t\t\t<span>{error}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{msg && (\n\t\t\t\t<div className='alert alert-success mb-4'>\n\t\t\t\t\t<span>{msg}</span>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className='card bg-base-100 shadow border border-base-300 mb-6'>\n\t\t\t\t<div className='card-body p-4'>\n\t\t\t\t\t<h2 className='card-title text-base'>Add article</h2>\n\n\t\t\t\t\t<form onSubmit={onAdd} className='flex flex-col gap-3 sm:flex-row'>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName='input input-bordered w-full'\n\t\t\t\t\t\t\tplaceholder='Title'\n\t\t\t\t\t\t\tvalue={title}\n\t\t\t\t\t\t\tonChange={(e) => setTitle(e.target.value)}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<button className='btn btn-primary sm:w-32' type='submit'>\n\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{items.length === 0 ? (\n\t\t\t\t<div className='card bg-base-100 shadow border border-base-300'>\n\t\t\t\t\t<div className='card-body p-4'>\n\t\t\t\t\t\t<div className='text-sm opacity-70'>Brak rekordów.</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div className='grid gap-3'>\n\t\t\t\t\t{items.map((x) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={x.id}\n\t\t\t\t\t\t\tclassName='card bg-base-100 shadow border border-base-300'>\n\t\t\t\t\t\t\t<div className='card-body p-4'>\n\t\t\t\t\t\t\t\t<div className='flex items-start justify-between gap-3'>\n\t\t\t\t\t\t\t\t\t<div className='min-w-0'>\n\t\t\t\t\t\t\t\t\t\t<div className='font-semibold truncate'>\n\t\t\t\t\t\t\t\t\t\t\t{x.title ?? x.id}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className='text-xs opacity-60'>ID: {x.id}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className='badge badge-outline'>article</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AALA;;;;;;AAce,SAAS;IACvB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,oIAAO;IAExB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAC;IAE/B,MAAM,OAAO;QACZ,IAAI,CAAC,MAAM,KAAK;QAEhB,WAAW;QACX,SAAS;QAET,IAAI;YACH,MAAM,IAAI,IAAA,0KAAK,EACd,IAAA,+KAAU,EAAC,4HAAE,EAAE,aACf,IAAA,0KAAK,EAAC,QAAQ,MAAM,KAAK,GAAG;YAE7B,MAAM,OAAO,MAAM,IAAA,4KAAO,EAAC;YAC3B,SAAS,KAAK,IAAI,CAAC,GAAG,CAAC,CAAC,IAAM,CAAC;oBAAE,IAAI,EAAE,EAAE;oBAAE,GAAG,EAAE,IAAI,EAAE;gBAAC,CAAC;QACzD,EAAE,OAAO,GAAG;YACX,SAAS,GAAG,WAAW;QACxB,SAAU;YACT,WAAW;QACZ;IACD;IAEA,IAAA,kNAAS,EAAC;QACT;IACD,GAAG;QAAC,MAAM;KAAI;IAEd,MAAM,QAAQ,OAAO;QACpB,EAAE,cAAc;QAChB,SAAS;QACT,OAAO;QAEP,IAAI,CAAC,MAAM,IAAI,IAAI;YAClB,SAAS;YACT;QACD;QAEA,IAAI;YACH,MAAM,IAAA,2KAAM,EAAC,IAAA,+KAAU,EAAC,4HAAE,EAAE,aAAa;gBACxC,OAAO,MAAM,IAAI;gBACjB,MAAM,KAAK,GAAG;gBACd,WAAW,IAAA,oLAAe;YAC3B;YAEA,SAAS;YACT,OAAO;YACP,MAAM;QACP,EAAE,OAAO,GAAG;YACX,SAAS,GAAG,WAAW;QACxB;IACD;IAEA,IAAI,SAAS;QACZ,qBACC,8OAAC;YAAI,WAAU;sBACd,cAAA,8OAAC;gBAAK,WAAU;;;;;;;;;;;IAGnB;IAEA,qBACC,8OAAC;QAAI,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCACd,8OAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,8OAAC;wBAAI,WAAU;kCAAuB,MAAM,MAAM;;;;;;;;;;;;YAGlD,uBACA,8OAAC;gBAAI,WAAU;0BACd,cAAA,8OAAC;8BAAM;;;;;;;;;;;YAIR,qBACA,8OAAC;gBAAI,WAAU;0BACd,cAAA,8OAAC;8BAAM;;;;;;;;;;;0BAIT,8OAAC;gBAAI,WAAU;0BACd,cAAA,8OAAC;oBAAI,WAAU;;sCACd,8OAAC;4BAAG,WAAU;sCAAuB;;;;;;sCAErC,8OAAC;4BAAK,UAAU;4BAAO,WAAU;;8CAChC,8OAAC;oCACA,WAAU;oCACV,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;8CAGzC,8OAAC;oCAAO,WAAU;oCAA0B,MAAK;8CAAS;;;;;;;;;;;;;;;;;;;;;;;YAO5D,MAAM,MAAM,KAAK,kBACjB,8OAAC;gBAAI,WAAU;0BACd,cAAA,8OAAC;oBAAI,WAAU;8BACd,cAAA,8OAAC;wBAAI,WAAU;kCAAqB;;;;;;;;;;;;;;;qCAItC,8OAAC;gBAAI,WAAU;0BACb,MAAM,GAAG,CAAC,CAAC,kBACX,8OAAC;wBAEA,WAAU;kCACV,cAAA,8OAAC;4BAAI,WAAU;sCACd,cAAA,8OAAC;gCAAI,WAAU;;kDACd,8OAAC;wCAAI,WAAU;;0DACd,8OAAC;gDAAI,WAAU;0DACb,EAAE,KAAK,IAAI,EAAE,EAAE;;;;;;0DAEjB,8OAAC;gDAAI,WAAU;;oDAAqB;oDAAK,EAAE,EAAE;;;;;;;;;;;;;kDAE9C,8OAAC;wCAAI,WAAU;kDAAsB;;;;;;;;;;;;;;;;;uBAVlC,EAAE,EAAE;;;;;;;;;;;;;;;;AAmBhB"}}]
}